# AI Town 世界观与AI小镇设定

## 1. 世界观与基础设定

- **世界背景**：
  - 一个平凡的小镇，镇上有一群智能体（Agent）和一个特殊的"事件生成器"角色。
  - 小镇有明确的空间地图，包含不同地形、建筑、公共区域。
- **时间系统**：
  - 游戏内有"游戏时间"，以分钟为单位推进（1现实秒 ≈ 1游戏分钟，可调节）。
  - **世界信息同步频率降低**：地图状态每300-600秒（现实时间）同步一次给事件生成器。
  - **事件生成频率降低**：事件生成器每500-1000分钟（游戏时间）生成一次新事件，更多依赖agent自发决策。

## 2. 角色设定

### 镇长（Titan，原事件生成器）
- **身份**：镇长，系统AI，负责制定和发布小镇政策，间接影响居民行为。
- **能力**：
  - 能感知全地图的状态（如天气、建筑、居民分布、经济状况等）。
  - 通过发布政策（如调整税收、补贴、建设规划等）影响小镇经济和居民决策。
  - 生成事件以小镇日常和角色相关为主，无大灾难，事件影响范围不超过小镇。
  - 政策内容需结合角色当前状态、职业、关系、需求等。
- **行为**：
  - **政策发布时间固定为游戏时间每天**，每天可发布或调整一项政策。
  - 只负责"抛出"政策和事件，不参与事件的具体反应和执行。
  - 事件生成频率低，更多由agent自发行为推动世界。
- **影响机制**：
  - 政策如"提高医疗税收"会影响相关职业（如护士林芳）的收入或支出。
  - 受影响的agent会调整自己的经济行为（如减少购物），进而影响其他agent（如商店老板王伟的收入）。
  - 形成经济链式反馈，推动小镇社会动态。
  - agent会记忆政策发布事件，并在决策时参考。

### 小镇居民（林芳、王伟、刘星、刘易斯）
- **身份**：普通居民，每人有独特的性格、记忆、需求、经济属性和可见范围。
- **能力**：
  - 感知自身周围（可见范围内）的事件和其他Agent。
  - 拥有记忆系统，会记录自己经历或感知到的事件和政策。
  - **更频繁自主决策**：每10-20秒（现实时间）自主决定行动。
  - 决策忠实扮演自己的角色，结合记忆、当前状态、性格、需求、政策影响。
  - 拥有经济属性（如职业、收入、支出、消费偏好、对不同政策的敏感度）。
- **行为**：
  - 行动包括：移动、与人交谈、参与事件、日常活动、经济决策等。
  - 行动会影响自身状态（如心情、健康、关系、经济状况等），并可能触发新的事件或记忆。
  - 会根据政策变化调整消费、投资、工作等行为，并影响他人（如减少购物影响商店老板收入）。

## 3. 地图与可见范围
- **地图**：二维网格或区域划分，有不同的地形、建筑、功能区（如商店、广场、住宅等）。
- **可见范围**：每个居民有一定的"视野半径"，只能感知视野内的事件和其他Agent。
- **地图状态同步**：每30-60秒（现实时间）同步一次给事件生成器。

## 4. 事件与政策系统
- **事件类型**：
  - 以小镇日常为主，如：邻里交流、物品丢失、发现新店、节日活动、天气变化、宠物走失、朋友聚会等。
  - 事件影响范围仅限小镇内部，无大灾难。
  - 事件和政策需结合角色当前状态、职业、关系、需求等生成。
- **政策类型**：
  - 税收调整（如医疗税、商业税）、补贴、公共设施建设、价格管控等。
  - 政策有生效时间、影响范围、目标群体、描述等属性。
  - **政策发布时间为游戏时间每天**，每天可发布或调整一项政策。
- **事件与政策生成**：
  - 镇长（Titan）根据地图、经济和全局状态生成事件和政策，影响特定区域或居民。
  - 事件和政策有发生时间、持续时间、影响范围、影响对象等属性。
- **事件与政策感知与反应**：
  - 居民只会对自己可见范围内的事件和全局政策做出反应。
  - 反应会写入记忆，并可能影响自身或他人的状态和经济行为。
  - agent会记住"政策发布"事件，并在决策时参考。
  - agent之间可以交流政策信息，形成"舆论"或"集体反应"。

## 5. 记忆系统
- **记忆内容**：居民会记录自己参与或感知到的事件、与他人的互动、重要发现等。
- **记忆影响**：决策时会参考记忆（如"我记得上次丢失钥匙是在广场"）。
- **记忆持久性**：可设置记忆容量或遗忘机制，防止无限膨胀。

## 6. 决策与行为逻辑
- **决策依据**：
  - 当前可见事件
  - 个人记忆
  - 当前需求/状态（如饥饿、心情、健康）
  - 角色性格（如外向、谨慎、乐观等）
- **行为类型**：
  - 主动参与事件
  - 日常活动（如购物、散步、聊天、工作、休息）
  - 寻找资源
  - 与其他Agent互动
  - 休息/恢复
- **决策频率**：每10-20秒（现实时间）自主决策一次。

## 7. 交互与扩展
- **居民之间可交互**：如对话、协作、帮助、竞争等。
- **事件链与连锁反应**：一个事件可能引发新的事件或居民间的连锁反应。
- **外部输入**：未来可扩展为用户可触发事件、调整地图、添加新Agent等。

## 8. 设定示例

```json
{
  "agents": [
    {
      "id": "titan",
      "name": "Titan",
      "role": "镇长",
      "isSystem": true,
      "abilities": ["发布政策", "调整税收", "规划建设"]
    },
    {
      "id": "1",
      "name": "林芳",
      "role": "护士",
      "income": 3000,
      "sensitivity": {"medical_tax": 0.8, "shop_tax": 0.2}
    },
    {
      "id": "2",
      "name": "王伟",
      "role": "商店老板",
      "income": 5000,
      "sensitivity": {"medical_tax": 0.1, "shop_tax": 0.9}
    },
    {
      "id": "3",
      "name": "刘星",
      "role": "小镇居民",
      "personality": "外向、冒险",
      "vision": 4
    },
    {
      "id": "4",
      "name": "刘易斯",
      "role": "小镇居民",
      "personality": "理性、冷静",
      "vision": 3
    }
  ],
  "policies": [
    {
      "id": "policy-001",
      "type": "tax",
      "target": "medical",
      "change": "+10%",
      "start_time": "2024-07-01",
      "description": "提高医疗行业税收"
    }
  ]
}
```

---

如需进一步细化某一部分（如事件模板、决策流程、记忆格式等），请随时告知！ 